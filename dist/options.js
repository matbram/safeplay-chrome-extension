(()=>{"use strict";const e={enabled:!0,filterMode:"mute",severityLevels:{mild:!1,moderate:!0,severe:!0,religious:!1},customBlacklist:[],customWhitelist:[],paddingMs:50,paddingBeforeMs:100,paddingAfterMs:30,mergeThresholdMs:100,autoEnableForFilteredVideos:!0};class t{constructor(){this.preferences=e}async initialize(){this.customBlacklist=document.getElementById("customBlacklist"),this.customWhitelist=document.getElementById("customWhitelist"),this.paddingBefore=document.getElementById("paddingBefore"),this.paddingAfter=document.getElementById("paddingAfter"),this.mergeThreshold=document.getElementById("mergeThreshold"),this.autoEnableFiltered=document.getElementById("autoEnableFiltered"),this.cacheCount=document.getElementById("cacheCount"),this.clearCacheBtn=document.getElementById("clearCacheBtn"),this.saveBtn=document.getElementById("saveBtn"),this.saveStatus=document.getElementById("saveStatus"),await this.loadPreferences(),await this.loadCacheCount(),this.setupEventListeners()}async loadPreferences(){try{const e=await chrome.runtime.sendMessage({type:"GET_PREFERENCES"});e.success&&e.data&&(this.preferences=e.data,this.updateUI())}catch(e){console.error("Failed to load preferences:",e)}}updateUI(){this.customBlacklist.value=this.preferences.customBlacklist.join("\n"),this.customWhitelist.value=this.preferences.customWhitelist.join("\n"),this.paddingBefore.value=(this.preferences.paddingBeforeMs??this.preferences.paddingMs).toString(),this.paddingAfter.value=(this.preferences.paddingAfterMs??this.preferences.paddingMs).toString(),this.mergeThreshold.value=this.preferences.mergeThresholdMs.toString(),this.autoEnableFiltered.checked=!1!==this.preferences.autoEnableForFilteredVideos}async loadCacheCount(){try{const e=(await chrome.storage.local.get("cachedTranscripts")).cachedTranscripts||{},t=Object.keys(e).length;this.cacheCount.textContent=t.toString()}catch(e){console.error("Failed to load cache count:",e),this.cacheCount.textContent="0"}}setupEventListeners(){this.saveBtn.addEventListener("click",()=>{this.saveSettings()}),this.clearCacheBtn.addEventListener("click",()=>{this.clearCache()}),chrome.runtime.onMessage.addListener(e=>{"PREFERENCES_UPDATED"===e.type&&e.payload&&(this.preferences=e.payload,this.updateUI())})}parseWordList(e){return e.split("\n").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0)}async saveSettings(){try{const e={customBlacklist:this.parseWordList(this.customBlacklist.value),customWhitelist:this.parseWordList(this.customWhitelist.value),paddingBeforeMs:parseInt(this.paddingBefore.value,10)||100,paddingAfterMs:parseInt(this.paddingAfter.value,10)||30,mergeThresholdMs:parseInt(this.mergeThreshold.value,10)||100,autoEnableForFilteredVideos:this.autoEnableFiltered.checked},t=await chrome.runtime.sendMessage({type:"SET_PREFERENCES",payload:e});t.success?(this.preferences=t.data,this.showSaveStatus("Settings saved successfully!","success")):this.showSaveStatus("Failed to save settings","error")}catch(e){console.error("Failed to save settings:",e),this.showSaveStatus("Failed to save settings","error")}}async clearCache(){try{(await chrome.runtime.sendMessage({type:"CLEAR_CACHE"})).success?(this.cacheCount.textContent="0",this.showSaveStatus("Cache cleared!","success")):this.showSaveStatus("Failed to clear cache","error")}catch(e){console.error("Failed to clear cache:",e),this.showSaveStatus("Failed to clear cache","error")}}showSaveStatus(e,t){this.saveStatus.textContent=e,this.saveStatus.className=`save-status ${t}`,setTimeout(()=>{this.saveStatus.textContent="",this.saveStatus.className="save-status"},3e3)}}document.addEventListener("DOMContentLoaded",()=>{(new t).initialize()})})();
//# sourceMappingURL=options.js.map